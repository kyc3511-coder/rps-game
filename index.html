<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>가위바위보 — 깔끔 UI</title>
  <style>
    :root{
      --bg:#0b1220; --panel:#0f172a; --card:#0b1220; --ink:#e5e7eb; --muted:#9ca3af;
      --pri:#2563eb; --pri2:#1d4ed8; --good:#16a34a; --bad:#ef4444;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:radial-gradient(1200px 820px at 80% -10%, #1f2a44 0%, var(--bg) 60%);
      color:var(--ink);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
                   "Pretendard", "Pretendard Variable", "Apple SD Gothic Neo",
                   "Noto Sans KR", "Malgun Gothic", "NanumGothic", Helvetica, Arial;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      text-rendering:optimizeLegibility;
      display:flex; align-items:center; justify-content:center; padding:20px;
    }
    .app{ width:min(980px, 100%); }
    header{ display:flex; align-items:end; justify-content:space-between; gap:12px; margin-bottom:16px; flex-wrap:wrap; }
    h1{ margin:0; font-size:clamp(20px, 3.2vw, 28px); letter-spacing:.2px }
    .controls{ display:flex; gap:8px; align-items:center; flex-wrap:wrap }
    select, button{
      appearance:none; border:1px solid #334155; background:linear-gradient(180deg,#1f2937,#0f172a);
      color:var(--ink); border-radius:12px; padding:10px 14px; font-weight:700; font-size:14px;
      box-shadow:0 10px 24px rgba(0,0,0,.28); cursor:pointer;
    }
    button:hover{ filter:brightness(1.06) } button:active{ transform: translateY(1px) }
    button.primary{ background:linear-gradient(180deg,var(--pri),var(--pri2)) }
    button.ghost{ background:transparent }
    main{ display:grid; grid-template-columns: 1.2fr .8fr; gap:16px }
    @media (max-width: 900px){ main{ grid-template-columns: 1fr; } }
    .board{
      background:linear-gradient(180deg,#0f172a,#0b1220); border:1px solid #334155;
      border-radius:16px; padding:16px; box-shadow:0 18px 40px rgba(0,0,0,.35);
    }
    .arena{ display:grid; grid-template-columns:1fr 80px 1fr; align-items:center; gap:10px; padding:8px 0 16px }
    .slot{
      background:var(--card); border:1px solid #334155; border-radius:16px; aspect-ratio: 16/9;
      display:flex; align-items:center; justify-content:center; font-size:clamp(40px,6vw,80px); box-shadow:inset 0 0 40px rgba(255,255,255,.03);
      position:relative; overflow:hidden;
    }
    .vs{ text-align:center; font-weight:900; color:var(--muted) }
    .name{ position:absolute; bottom:8px; left:0; right:0; text-align:center; font-size:13px; color:var(--muted) }
    .result{ text-align:center; font-size:clamp(18px, 2.2vw, 22px); font-weight:800; padding:6px 0 0 }
    .result.win{ color:var(--good) } .result.lose{ color:var(--bad) } .result.draw{ color:var(--pri) }
    .actions{ display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; padding:12px 0 4px }
    .pick{
      height:64px; border-radius:14px; display:flex; align-items:center; justify-content:center; gap:10px; font-weight:800;
      background:linear-gradient(180deg,#111827,#0b1220); border:1px solid #334155;
    }
    .pick:hover{ transform:translateY(-1px); filter:brightness(1.06) }
    .pick svg{ width:28px; height:28px }
    .scorebar{ display:flex; gap:10px; align-items:center; justify-content:center; margin-top:8px; color:var(--muted) }
    .dot{ width:10px; height:10px; border-radius:999px; background:#334155 } .dot.on{ background:var(--good) }
    .score{ display:grid; grid-template-columns: repeat(3, 1fr); gap:8px; margin-top:12px }
    .score .card{ background:var(--card); border:1px solid #334155; border-radius:12px; padding:10px; text-align:center; color:var(--muted) }
    .score .card b{ font-size:20px; color:var(--ink) }
    .panel{ background:linear-gradient(180deg,#0f172a,#0b1220); border:1px solid #334155; border-radius:16px; padding:14px; display:flex; flex-direction:column; gap:10px; box-shadow:0 18px 40px rgba(0,0,0,.35) }
    .history{ max-height:360px; overflow:auto; border-radius:10px; border:1px solid #334155; background:rgba(255,255,255,.03) }
    .row{ display:grid; grid-template-columns: 54px 1fr 1fr 70px; gap:8px; padding:8px 10px; border-bottom:1px solid rgba(255,255,255,.06); align-items:center; font-size:14px }
    .row:last-child{ border-bottom:none }
    .badge{ font-size:12px; padding:3px 8px; border-radius:999px; border:1px solid #334155; color:#cbd5e1; text-align:center }
    .badge.win{ border-color:#14532d; color:#86efac; background:rgba(34,197,94,.12) }
    .badge.lose{ border-color:#4c0519; color:#fca5a5; background:rgba(239,68,68,.12) }
    .badge.draw{ border-color:#1e3a8a; color:#93c5fd; background:rgba(59,130,246,.12) }
    footer{ margin-top:10px; color:var(--muted); font-size:13px; text-align:center }
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="가위바위보 게임">
    <header>
      <div>
        <h1>가위바위보</h1>
        <div style="color:var(--muted); font-size:14px">버튼을 눌러 선택하세요. 먼저 지정한 판수만큼 이기는 사람이 승리!</div>
      </div>
      <div class="controls">
        <label for="target" style="font-size:14px;color:var(--muted)">승리 조건:</label>
        <select id="target" aria-label="승리 조건 선택">
          <option value="1">1선승</option>
          <option value="2">2선승</option>
          <option value="3" selected>3선승</option>
          <option value="5">5선승</option>
        </select>
        <button id="resetBtn">리셋</button>
        <button id="autoBtn" class="ghost">자동 플레이</button>
      </div>
    </header>

    <main>
      <section class="board" aria-live="polite">
        <div class="arena">
          <div class="slot" id="youSlot">
            <div id="youEmoji" aria-hidden="true" style="display:flex; align-items:center; gap:10px"></div>
            <div class="name">당신</div>
          </div>
          <div class="vs">VS</div>
          <div class="slot" id="cpuSlot">
            <div id="cpuEmoji" aria-hidden="true" style="display:flex; align-items:center; gap:10px"></div>
            <div class="name">컴퓨터</div>
          </div>
        </div>
        <div id="resultText" class="result draw">시작해볼까요?</div>
        <div class="actions">
          <button class="pick" data-pick="rock" aria-label="바위 선택">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M7 10l3-5 4 1 3 4-1 6-5 3-4-2-1-4z"/></svg>
            <span>바위</span>
          </button>
          <button class="pick" data-pick="paper" aria-label="보 선택">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><rect x="6" y="3" width="12" height="18" rx="2"/></svg>
            <span>보</span>
          </button>
          <button class="pick" data-pick="scissors" aria-label="가위 선택">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><circle cx="7" cy="7" r="3"/><circle cx="7" cy="17" r="3"/><path d="M10 7l11 5M10 17l11-5"/></svg>
            <span>가위</span>
          </button>
        </div>
        <div class="scorebar" id="roundDots" aria-hidden="true"></div>
        <div class="score">
          <div class="card">당신 승 <br><b id="youWins">0</b></div>
          <div class="card">무승부 <br><b id="draws">0</b></div>
          <div class="card">컴퓨터 승 <br><b id="cpuWins">0</b></div>
        </div>
      </section>

      <aside class="panel">
        <div style="display:flex; align-items:center; justify-content:space-between">
          <h3 style="margin:0;font-size:16px;color:#cbd5e1">전적 기록</h3>
          <button id="clearHistory" class="ghost">기록 비우기</button>
        </div>
        <div class="history" id="history" role="log" aria-live="polite" aria-label="전적 기록"></div>
      </aside>
    </main>

    <footer>
      단축키: <b>R</b> 리셋 · <b>A</b> 자동 플레이 · <b>1/2/3</b> = 바위/보/가위
    </footer>
  </div>

  <script>
  (function(){
    // SVG 아이콘 (글꼴 의존성 ↓)
    const icons = {
      rock: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M7 10l3-5 4 1 3 4-1 6-5 3-4-2-1-4z"/></svg>',
      paper: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><rect x="6" y="3" width="12" height="18" rx="2"/></svg>',
      scissors: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><circle cx="7" cy="7" r="3"/><circle cx="7" cy="17" r="3"/><path d="M10 7l11 5M10 17l11-5"/></svg>'
    };
    const rules = { rock:{beats:'scissors'}, paper:{beats:'rock'}, scissors:{beats:'paper'} };

    const youEmoji = document.getElementById('youEmoji');
    const cpuEmoji = document.getElementById('cpuEmoji');
    const resultText = document.getElementById('resultText');
    const youWinsEl = document.getElementById('youWins');
    const cpuWinsEl = document.getElementById('cpuWins');
    const drawsEl   = document.getElementById('draws');
    const targetSel = document.getElementById('target');
    const historyEl = document.getElementById('history');
    const roundDots = document.getElementById('roundDots');
    const resetBtn  = document.getElementById('resetBtn');
    const autoBtn   = document.getElementById('autoBtn');
    const clearBtn  = document.getElementById('clearHistory');

    let state = { you:0, cpu:0, draw:0, target:parseInt(targetSel.value,10), locked:false, autoTimer:null, rounds:[] };

    function dotRender(){ roundDots.innerHTML = state.rounds.map(r=>`<span class="dot ${r==='win'?'on':''}"></span>`).join(''); }
    function cpuPick(){ return ['rock','paper','scissors'][Math.floor(Math.random()*3)]; }
    function judge(you, cpu){ if(you===cpu) return 'draw'; return rules[you].beats===cpu?'win':'lose'; }
    function updateScore(res){ if(res==='win'){state.you++; youWinsEl.textContent=state.you;} else if(res==='lose'){state.cpu++; cpuWinsEl.textContent=state.cpu;} else {state.draw++; drawsEl.textContent=state.draw;} }
    function writeHistory(you, cpu, res){
      const n = state.you + state.cpu + state.draw;
      historyEl.insertAdjacentHTML('afterbegin', `
        <div class="row">
          <div style=\"text-align:center;color:#94a3b8\">#${n}</div>
          <div>당신: <b style=\"display:inline-flex;gap:6px;align-items:center\">${icons[you]} <span>${label(you)}</span></b></div>
          <div>컴퓨터: <b style=\"display:inline-flex;gap:6px;align-items:center\">${icons[cpu]} <span>${label(cpu)}</span></b></div>
          <div style=\"text-align:right\"><span class=\"badge ${res}\">${res==='win'?'승':res==='lose'?'패':'무'}</span></div>
        </div>`);
    }
    function label(k){ return k==='rock'?'바위':k==='paper'?'보':'가위'; }
    function flash(el){ el.animate([{transform:'scale(1)',filter:'brightness(1)'},{transform:'scale(1.06)',filter:'brightness(1.2)'},{transform:'scale(1)',filter:'brightness(1)'}],{duration:260,easing:'cubic-bezier(.2,.8,.2,1)'}); }

    function play(youChoice){
      if(state.locked) return;
      const cpuChoice = cpuPick();
      youEmoji.innerHTML = icons[youChoice];
      cpuEmoji.innerHTML = icons[cpuChoice];
      flash(document.getElementById('youSlot')); flash(document.getElementById('cpuSlot'));

      const res = judge(youChoice, cpuChoice);
      state.rounds.push(res); dotRender(); updateScore(res); writeHistory(youChoice, cpuChoice, res);

      resultText.className = 'result ' + (res==='win'?'win':res==='lose'?'lose':'draw');
      resultText.textContent = res==='win' ? '이겼습니다!' : res==='lose' ? '졌습니다…' : '비겼어요';

      if(state.you >= state.target || state.cpu >= state.target){ state.locked=true; resultText.textContent = `매치 종료 — ${state.you>state.cpu?'당신 승리!':'컴퓨터 승리!'}`; autoStop(); }
    }

    document.querySelectorAll('.pick').forEach(btn=> btn.addEventListener('click', ()=> play(btn.dataset.pick)) );
    targetSel.addEventListener('change', ()=>{ state.target=parseInt(targetSel.value,10); reset(true); });
    resetBtn.addEventListener('click', ()=> reset(false));
    clearBtn.addEventListener('click', ()=> historyEl.innerHTML='');

    addEventListener('keydown', (e)=>{
      const k = e.key.toLowerCase();
      if(k==='1') play('rock'); else if(k==='2') play('paper'); else if(k==='3') play('scissors');
      else if(k==='r') reset(false); else if(k==='a') autoToggle();
    });

    function reset(keepHistory){ state.you=state.cpu=state.draw=0; state.locked=false; state.rounds.length=0; youWinsEl.textContent=cpuWinsEl.textContent=drawsEl.textContent='0'; youEmoji.innerHTML=cpuEmoji.innerHTML=''; resultText.className='result draw'; resultText.textContent='새로 시작합니다!'; dotRender(); if(!keepHistory) historyEl.innerHTML=''; autoStop(); }
    function autoToggle(){ state.autoTimer?autoStop():autoStart(); }
    function autoStart(){ autoBtn.textContent='자동 정지'; state.autoTimer=setInterval(()=>{ play(cpuPick()); }, 700); }
    function autoStop(){ autoBtn.textContent='자동 플레이'; clearInterval(state.autoTimer); state.autoTimer=null; }

    // 초기 상태 렌더
    dotRender();
  })();
  </script>
</body>
</html>